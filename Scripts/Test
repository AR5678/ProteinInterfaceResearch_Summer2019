for i in $(seq 5 5 95)
do
   echo $i
   echo "Protein" "Threshold" "TP" "FP" "FN" "TPR" "FPR" >> ~/Desktop/ROC_scores/ispred.${i}
    for file in ~/Desktop/ISPRED_30_protein_predictions_sorted/*
    do
     pdb=`echo $file | awk -F/ '{print $6}' | awk -F'_' '{print $2}' | awk -F. '{print $1}'`
     chain=`echo $file | awk -F/ '{print $6}' | awk -F'_' '{print $2}' | awk -F. '{print $2}'`
     fileid=${pdb}.${chain}
     echo $fileid
     interface=~/Desktop/Testquery30_interface/${fileid}
     combined_file=~/Desktop/Combined_ROCfiles/${fileid}.combined
     cat "$file" | awk '{if($3>${i}) print $1,$2}' >> ${combined_file}.${i}
     cat "$interface" >> ${combined_file}.${i}
     TP=`cat "${combined_file}.${i}" | awk '{print $1}' | sort | uniq -d | awk 'END{print NR}'
     M=`cat "$file" | awk '{if($3>${i}) print $1,$2}' | wc -l`
     N=`cat "$interface" | wc -l`
     FP=$((M-TP))
     FN=$((N-TP))
     TPR=`echo "scale=3; $TP/$((TP+FN))" | bc -l`
     FPR=`echo "scale=3; $TP/$((TP+FP))" | bc -l`
     echo $fileid $i $TP $FP $FN $TPR $FPR >> ~/Desktop/ROC_scores/ispred.${i}
  done
  G=`cat ~/Desktop/ROC_scores/ispred.${i} | column -t`
  echo $G > ~/Desktop/ROC_scores/ispred.${i}
  tp_sum=`cat ~/Desktop/ROC_scores/ispred.${i} | awk '{s+=$3}END{print s}'`
  fp_sum=`cat ~/Desktop/ROC_scores/ispred.${i} | awk '{s+=$4}END{print s}'`
  fn_sum=`cat ~/Desktop/ROC_scores/ispred.${i} | awk '{s+=$5}END{print s}'`
  tpfn_sum=$((tp_sum+fn_sum))
  tpfp_sum=$((tp_sum+fp_sum))
  Global_TPR=`bc <<<"scale=3; $tp_sum/$tpfn_sum"`
  Global_FPR=`bc <<<"scale=3; $tp_sum/$tpfp_sum"`
  avg_TPR=`cat ~/Desktop/ROC_scores/ispred.${i} | awk '{total += $6} END {print total/NR}'`
  avg_FPR=`cat ~/Desktop/ROC_scores/ispred.${i} | awk '{total += $7} END {print total/NR}'`
  echo "Global_TPR = " $Global_TPR >> ~/Desktop/ROC_scores/ispred.${i}
  echo "Global_FPR = " $Global_FPR >> ~/Desktop/ROC_scores/ispred.${i}
  echo "avg_TPR = " $avg_TPR >> ~/Desktop/ROC_scores/ispred.${i}
  echo "avg_FPR = " $avg_FPR >> ~/Desktop/ROC_scores/ispred.${i}
